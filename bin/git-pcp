#!/usr/bin/env bash 

git add --all .
if [[ "$#" = "0" ]]
then
    git ci -m "Auto commit `date +'%Y-%m-%d'`" -a
else
    git ci -m "$*" -a
fi

git push origin `git branch|grep '\*'| awk '{print $2}'` > /tmp/pcp-log

line="$(cat /tmp/pcp-log|grep -n "Create pull request"|awk -F\: '{print $1}')";
tail -n +$((++line)) /tmp/pcp-log |head -n 1| open "`awk -F" " '{print $2}'`"
